{% extends "tasks/base.html" %}
{% block title %}{{ project.name }}{% endblock %}

{% block content %}
<h2>{{ project.name }}</h2>
<p>Done: {{ done_count }} / {{ total_count }}</p>

<form method="post" action="{% url 'tasks:add_task' project.id %}">
  {% csrf_token %}
  <input type="text" name="title" placeholder="New task title" required>
  <button type="submit">Add</button>
</form>

<hr>

{% if tasks %}
  <ul>
    {% for t in tasks %}
      <li>
        {% if t.is_done %}✅{% else %}⏳{% endif %}
        {{ t.title }}

        <form method="post" action="{% url 'tasks:toggle_task' t.id %}" style="display:inline;">
          {% csrf_token %}
          <button type="submit">
            {% if t.is_done %}Mark not done{% else %}Mark done{% endif %}
          </button>
        </form>

        <form method="post" action="{% url 'tasks:delete_task' t.id %}" style="display:inline;">
          {% csrf_token %}
          <button type="submit">Delete</button>
        </form>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>No tasks in this project.</p>
{% endif %}
{% endblock %}
